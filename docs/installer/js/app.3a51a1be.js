(function(e){function t(t){for(var s,i,c=t[0],l=t[1],o=t[2],d=0,p=[];d<c.length;d++)i=c[d],n[i]&&p.push(n[i][0]),n[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,c=1;c<a.length;c++){var l=a[c];0!==n[l]&&(s=!1)}s&&(r.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},n={app:0},r=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/installer/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"552d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),n=a("bb71"),r=(a("da64"),a("3ccf"));s["a"].use(n["a"],{iconfont:"md",directives:{Ripple:r["a"]}});var i=a("998c"),c=a.n(i);a("2c43");s["a"].use(c.a);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{app:"",dark:""}},[a("v-toolbar-title",{staticClass:"headline text-uppercase",attrs:{dark:""}},[a("span",{staticClass:"font-weight-light"},[e._v("GARDENER INSTALLER")])]),a("v-spacer")],1),a("v-content",[a("router-view")],1)],1)},o=[],u={name:"App",components:{},data:function(){return{}}},d=u,p=a("2877"),f=a("6544"),v=a.n(f),m=a("7496"),b=a("549c"),g=a("9910"),h=a("71d9"),y=a("2a7f"),x=Object(p["a"])(d,l,o,!1,null,null,null),w=x.exports;v()(x,{VApp:m["a"],VContent:b["a"],VSpacer:g["a"],VToolbar:h["a"],VToolbarTitle:y["a"]});var k=a("8c4f"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",[a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"d-flex":"",xs12:"",sm6:""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticClass:"title"},[e._v("Infrastructure")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"py-0",attrs:{xs6:""}},[a("v-select",{attrs:{items:e.cloudProviderItems,label:"Provider",dense:""},model:{value:e.clusterIaas,callback:function(t){e.clusterIaas=t},expression:"clusterIaas"}})],1),a("v-flex",{staticClass:"py-0",attrs:{xs6:""}},[a("v-select",{attrs:{items:e.regionItems(e.clusterIaas),label:"Region",flat:""},model:{value:e.clusterRegion,callback:function(t){e.clusterRegion=t},expression:"clusterRegion"}})],1),a("v-flex",{staticClass:"py-0",attrs:{xs12:""}},["aws"===e.clusterIaas||"gcp"===e.clusterIaas?a("v-select",{attrs:{items:e.zoneItems(e.clusterIaas,e.clusterRegion),label:"Zones","small-chips":"",chips:"",multiple:"",flat:""},model:{value:e.zones,callback:function(t){e.zones=t},expression:"zones"}}):e._e()],1)],1)],1),"aws"===e.clusterIaas?a("v-card-text",[a("v-subheader",{staticClass:"px-0 black--text"},[e._v("Credentials")]),a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min(30)],counter:"128",hint:"e.g. AKIAIOSFODNN7EXAMPLE",label:"Access Key ID","browser-autocomplete":"off"},model:{value:e.accessKeyID,callback:function(t){e.accessKeyID=t},expression:"accessKeyID"}}),a("v-text-field",{attrs:{"append-icon":e.secretAccessKeyVisible?"visibility":"visibility_off",rules:[e.rules.required,e.rules.min(40)],type:e.secretAccessKeyVisible?"text":"password",label:"Secret Access Key",hint:"e.g. wJalrXUtnFEMIK7MDENG/bPxRfiCYzEXAMPLEKEY",counter:"40"},on:{"click:append":function(t){e.secretAccessKeyVisible=!e.secretAccessKeyVisible}},model:{value:e.secretAccessKey,callback:function(t){e.secretAccessKey=t},expression:"secretAccessKey"}})],1):"azure"===e.clusterIaas?a("v-card-text",[a("v-subheader",{staticClass:"px-0 black--text"},[e._v("Credentials")]),a("v-text-field",{attrs:{rules:[e.rules.required],counter:"",label:"Client ID","browser-autocomplete":"off"},model:{value:e.clientID,callback:function(t){e.clientID=t},expression:"clientID"}}),a("v-text-field",{attrs:{"append-icon":e.clientSecretVisible?"visibility":"visibility_off",rules:[e.rules.required],type:e.clientSecretVisible?"text":"password",label:"Client Secret",counter:""},on:{"click:append":function(t){e.clientSecretVisible=!e.clientSecretVisible}},model:{value:e.clientSecret,callback:function(t){e.clientSecret=t},expression:"clientSecret"}}),a("v-text-field",{attrs:{rules:[e.rules.required],counter:"",label:"Tenant ID","browser-autocomplete":"off"},model:{value:e.tenantID,callback:function(t){e.tenantID=t},expression:"tenantID"}}),a("v-text-field",{attrs:{rules:[e.rules.required],counter:"",label:"Subscription ID","browser-autocomplete":"off"},model:{value:e.subscriptionID,callback:function(t){e.subscriptionID=t},expression:"subscriptionID"}})],1):"gcp"===e.clusterIaas?a("v-card-text",[a("v-subheader",{staticClass:"px-0 black--text"},[e._v("Credentials")]),a("v-text-field",{attrs:{readonly:"",placeholder:"No file choosen",label:"Service Account Key",hint:"Choose service account key file in JSON format","prepend-icon":"attach_file"},on:{click:e.pickServiceaccount,"click:prepend":e.pickServiceaccount},model:{value:e.serviceaccountFilename,callback:function(t){e.serviceaccountFilename=t},expression:"serviceaccountFilename"}}),a("input",{ref:"serviceaccountInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.onServiceaccount}})],1):e._e()],1)],1),a("v-flex",{attrs:{"d-flex":"",xs12:"",sm6:""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticClass:"title"},[e._v("Cluster")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticClass:"py-0",attrs:{xs12:""}},[a("v-text-field",{attrs:{readonly:"",placeholder:"No file choosen",label:"Kubeconfig","prepend-icon":"attach_file"},on:{click:e.pickKubeconfig,"click:prepend":e.pickKubeconfig},model:{value:e.kubeconfigFilename,callback:function(t){e.kubeconfigFilename=t},expression:"kubeconfigFilename"}}),a("input",{ref:"kubeconfigInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.onKubeconfig}})],1),a("v-flex",{staticClass:"py-0",attrs:{xs12:""}},[a("v-text-field",{attrs:{rules:[e.rules.required],hint:"e.g. mycluster.example.org","persistent-hint":"",label:"Domain","browser-autocomplete":"off"},model:{value:e.clusterDomain,callback:function(t){e.clusterDomain=t},expression:"clusterDomain"}})],1),a("v-flex",{staticClass:"pb-0",attrs:{xs12:""}},[a("v-subheader",{staticClass:"px-0 black--text"},[e._v("Administrator")])],1),a("v-flex",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{attrs:{rules:[e.rules.required,e.rules.min(3)],hint:"e.g. john.doe@example.org",label:"Email","browser-autocomplete":"off"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("v-flex",{staticClass:"py-0",attrs:{xs6:""}},[a("v-text-field",{attrs:{"append-icon":e.passwordVisible?"visibility":"visibility_off",rules:[e.rules.required],type:e.secretAccessKeyVisible?"text":"password",label:"Password","browser-autocomplete":"off"},on:{"click:append":function(t){e.secretAccessKeyVisible=!e.secretAccessKeyVisible}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("v-flex",{staticClass:"pb-0",attrs:{xs12:""}},[a("v-subheader",{staticClass:"px-0 black--text"},[e._v("Networks")])],1),a("v-flex",{staticClass:"py-0",attrs:{xs4:""}},[a("v-text-field",{attrs:{rules:[e.rules.required],hint:"e.g. 10.132.0.0/16","persistent-hint":"",label:"Nodes CIDR","browser-autocomplete":"off"},model:{value:e.networkNodeCidr,callback:function(t){e.networkNodeCidr=t},expression:"networkNodeCidr"}})],1),a("v-flex",{staticClass:"pt-0",attrs:{xs4:""}},[a("v-text-field",{attrs:{rules:[e.rules.required],hint:"e.g. 10.44.0.0/15","persistent-hint":"",label:"Pods CIDR","browser-autocomplete":"off"},model:{value:e.networkPodCidr,callback:function(t){e.networkPodCidr=t},expression:"networkPodCidr"}})],1),a("v-flex",{staticClass:"pt-0",attrs:{xs4:""}},[a("v-text-field",{attrs:{rules:[e.rules.required],hint:"e.g. 10.47.240.0/20","persistent-hint":"",label:"Services CIDR","browser-autocomplete":"off"},model:{value:e.networkServiceCidr,callback:function(t){e.networkServiceCidr=t},expression:"networkServiceCidr"}})],1)],1)],1)],1)],1),a("v-flex",{attrs:{"d-flex":"",grow:"",xs12:""}},[a("v-card",{attrs:{flat:""}},[a("v-card-title",{staticClass:"headline"},[e._v("Getting started")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("This is a POC trying to install the Gardener through a pod.")]),a("p",[e._v("\n                  Enter your data in the form above, download the\n                  "),a("v-btn",{attrs:{small:"",flat:"",color:"green"},on:{click:e.onDeployDownload}},[a("tt",{staticClass:"text-lowercase"},[e._v("gardener-deploy.yaml")])],1),a("span",{staticClass:"ml-2"},[e._v("file")]),e._v(" and apply it.\n                ")],1),a("div",{staticStyle:{"max-width":"480px"}},[a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[a("code",{staticClass:"reset bash"},[e._v("kubectl apply -f gardener-deploy.yaml")])])]),a("br"),a("br"),a("p",[e._v("\n                  To delete the Gardener from your cluster download the\n                  "),a("v-btn",{attrs:{small:"",color:"red",flat:""},on:{click:e.onUndeployDownload}},[a("tt",{staticClass:"text-lowercase"},[e._v("gardener-undeploy.yaml")])],1),a("span",{staticClass:"ml-2"},[e._v("file")]),e._v(" and apply it.\n                ")],1),a("div",{staticStyle:{"max-width":"480px"}},[a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[a("code",{staticClass:"reset bash"},[e._v("kubectl apply -f gardener-undeploy.yaml")])])])])],1)],1)],1)],1)],1)],1)],1)},C=[],D=(a("7f7f"),a("a481"),a("cebc")),P=a("651e"),S=a.n(P),V=a("aeb1"),_=a.n(V),A=a("2f62"),K=a("f499"),N=a.n(K);function T(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},s=e.$refs["input-slot"];function n(e){e.stopPropagation(),e.preventDefault();var s=e.dataTransfer.files;if(s.length){var n=s[0];if(t.test(n.type)){var r=new FileReader,i=function(e){try{var t=JSON.parse(e.target.result);a(N()(t,null,"  "))}catch(s){}};r.onloadend=i,r.readAsText(n)}}}function r(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}s.addEventListener("dragover",r,!1),s.addEventListener("drop",n,!1)}var R={name:"Home",data:function(){return{name:"myGardener",accessKeyID:null,secretAccessKey:null,secretAccessKeyVisible:!1,serviceaccount:null,clientID:null,clientSecret:null,clientSecretVisible:null,subscriptionID:null,tenantID:null,kubeconfig:null,clusterIaas:"gcp",clusterRegion:null,clusterDomain:null,zones:[],networkNodeCidr:null,networkPodCidr:null,networkServiceCidr:null,username:null,password:null,passwordVisible:!1,files:[],kubeconfigFilename:null,serviceaccountFilename:null,rules:{required:function(e){return!!e||"Required."},min:function(e){return function(t){return t&&t.length>=e||"Min ".concat(e," characters")}}}}},computed:Object(D["a"])({},Object(A["b"])(["cloudProviderItems","regionItems","zoneItems","backupType","dnsType"]),{landscapeName:function(){return this.domain?this.domain.replace(".","-"):"gardener.example.org"},landscape:function(){return{name:this.landscapeName,cluster:{kubeconfig:"./kubeconfig",domain:this.clusterDomain,iaas:this.clusterIaas,region:this.clusterRegion},networks:{pods:this.networkPodCidr,nodes:this.networkNodeCidr,services:this.networkServiceCidr},iaas:{region:this.clusterRegion,zones:this.zones,credentials:this.credentials},etcd:{backup:{type:this.backupType(this.clusterIaas),region:this.clusterRegion,credentials:this.credentials}},dns:{type:this.dnsType(this.clusterIaas),credentials:this.credentials},identity:{users:[{email:this.username,username:this.username,password:this.password}]}}},acre:function(){return S.a.dump({credentials:this.credentials,landscape:this.landscape})},credentials:function(){switch(this.clusterIaas){case"aws":return{region:this.clusterRegion,accessKeyID:this.accessKeyID,secretAccessKey:this.secretAccessKey};case"azure":return{clientID:this.clientID,clientSecret:this.clientSecret,subscriptionID:this.subscriptionID,tenantID:this.tenantID};case"gcp":return{"serviceaccount.json":this.serviceaccount};default:return null}},deployPod:function(){return S.a.dump({apiVersion:"v1",kind:"Pod",metadata:{name:"garden-setup-installer",namespace:"default"},spec:{restartPolicy:"Never",containers:[{name:"garden-setup-installer",image:"diaphteiros/garden-setup",imagePullPolicy:"Always",command:["./run.sh","--color","deploy","-An"],resources:{},volumeMounts:[{name:"garden-setup-config",mountPath:"/etc/garden-setup/config"},{name:"garden-setup-state",mountPath:"/landscape"}]}],volumes:[{name:"garden-setup-config",secret:{secretName:"garden-setup-config"}},{name:"garden-setup-state",persistentVolumeClaim:{claimName:"garden-setup-state"}}]}})},deletePod:function(){return S.a.dump({apiVersion:"v1",kind:"Pod",metadata:{name:"garden-setup-installer",namespace:"default"},spec:{restartPolicy:"Never",containers:[{name:"garden-setup-installer",image:"diaphteiros/garden-setup",imagePullPolicy:"Always",command:["./run.sh","--color","delete","-A"],resources:{},volumeMounts:[{name:"garden-setup-config",mountPath:"/etc/garden-setup/config"},{name:"garden-setup-state",mountPath:"/landscape"}]}],volumes:[{name:"garden-setup-config",secret:{secretName:"garden-setup-config"}},{name:"garden-setup-state",persistentVolumeClaim:{claimName:"garden-setup-state"}}]}})},pvc:function(){return S.a.dump({apiVersion:"v1",kind:"PersistentVolumeClaim",metadata:{name:"garden-setup-state",namespace:"default"},spec:{accessModes:["ReadWriteOnce"],resources:{requests:{storage:"1Gi"}}}})},secret:function(){return S.a.dump({apiVersion:"v1",kind:"Secret",metadata:{name:"garden-setup-config",namespace:"default"},type:"Opaque",data:{kubeconfig:btoa(this.kubeconfig),"acre.yaml":btoa(this.acre)}})},deployManifest:function(){return["---\n",this.secret,"---\n",this.pvc,"---\n",this.deployPod].join("")},undeployManifest:function(){return["---\n",this.deletePod].join("")}}),methods:{onDeployDownload:function(){_()(this.deployManifest,"gardener-deploy.yaml","text/yaml")},onUndeployDownload:function(){_()(this.undeployManifest,"gardener-undeploy.yaml","text/yaml")},pickServiceaccount:function(){this.$refs.serviceaccountInput.click()},onServiceaccount:function(e){var t=this,a=e.target.files[0];this.serviceaccountFilename=a.name;var s=new FileReader;s.onload=function(){t.serviceaccount=s.result},s.readAsText(a)},pickKubeconfig:function(){this.$refs.kubeconfigInput.click()},onKubeconfig:function(e){var t=this,a=e.target.files[0];this.kubeconfigFilename=a.name;var s=new FileReader;s.onload=function(){t.kubeconfig=s.result},s.readAsText(a)},clickKubeconfigUpload:function(){this.$refs.kubeconfigUploadButton.querySelector("input").click()}},watch:{clusterIaas:function(e){var t=this;"gcp"===e&&this.$nextTick(function(){var e=function(e){t.serviceaccount=e};T(t.$refs.serviceaccount,/json/,e)})}}},j=R,O=(a("6a75"),a("8336")),F=a("b0af"),q=a("99d9"),E=a("12b2"),M=a("a523"),z=a("0e8f"),$=a("4bd4"),G=a("a722"),L=a("b56d"),J=a("e0c7"),U=a("2677"),X=Object(p["a"])(j,I,C,!1,null,"103fabf3",null),B=X.exports;v()(X,{VBtn:O["a"],VCard:F["a"],VCardText:q["a"],VCardTitle:E["a"],VContainer:M["a"],VFlex:z["a"],VForm:$["a"],VLayout:G["a"],VSelect:L["a"],VSubheader:J["a"],VTextField:U["a"]}),s["a"].use(k["a"]);var Y=new k["a"]({mode:"history",base:"/installer",routes:[{path:"/",name:"home",component:B}]}),H=a("a4bb"),W=a.n(H);s["a"].use(A["a"]);var Z={drawer:!1,cloudProviders:{aws:{dns:"aws-route53",storage:"s3",regions:{"eu-west-1":["a","b","c"].map(function(e){return"eu-west-1"+e}),"eu-central-1":["a","b","c"].map(function(e){return"eu-central-1"+e}),"us-east-1":["a","b","c"].map(function(e){return"us-east-1"+e})}},azure:{dns:"azure-dns",storage:"abs",regions:{westeurope:void 0,eastus:void 0}},gcp:{dns:"google-clouddns",storage:"gcs",regions:{"europe-west1":["b","c","d"].map(function(e){return"europe-west1-"+e}),"us-east1":["b","c","d"].map(function(e){return"us-east1-"+e}),"us-central1":["a","b","c"].map(function(e){return"us-central1-"+e})}}}},Q={cloudProviderItems:function(e){return W()(e.cloudProviders)},backupType:function(e){return function(t){var a=e.cloudProviders[t];return a?a.storage:null}},dnsType:function(e){return function(t){var a=e.cloudProviders[t];return a?a.dns:null}},regionItems:function(e){return function(t){var a=e.cloudProviders[t];return a?W()(a.regions):[]}},zoneItems:function(e){return function(t,a){var s=e.cloudProviders[t];return s?s.regions[a]:[]}}},ee={},te={setDrawer:function(e,t){return e.drawer=t},toggleDrawer:function(e){return e.drawer=!e.drawer}},ae=new A["a"].Store({state:Z,getters:Q,actions:ee,mutations:te}),se=ae;s["a"].config.productionTip=!1,new s["a"]({router:Y,store:se,render:function(e){return e(w)}}).$mount("#app")},"6a75":function(e,t,a){"use strict";var s=a("552d"),n=a.n(s);n.a}});
//# sourceMappingURL=app.3a51a1be.js.map